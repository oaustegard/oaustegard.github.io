# Instructions: Create PR for Installation Automation

**Context:** Add automated skill installation templates to the claude-skills repository.

## What to Create

### 1. Create `templates/installation/install-skills.sh`

```bash
#!/bin/bash
set -e

REPO_URL="https://github.com/oaustegard/claude-skills.git"
TEMP_DIR=$(mktemp -d)
SKILLS_DIR=".claude/skills"

# Skills to install (edit this list as needed)
SKILLS=(
  "mapping-codebases"
  "generating-patches"
  "versioning-skills"
)

echo "Cloning claude-skills repository..."
git clone --depth 1 --quiet "$REPO_URL" "$TEMP_DIR"

mkdir -p "$SKILLS_DIR"

for skill in "${SKILLS[@]}"; do
  if [ -d "$TEMP_DIR/$skill" ] && [ -f "$TEMP_DIR/$skill/SKILL.md" ]; then
    echo "Installing $skill..."

    # Remove existing skill directory if present
    rm -rf "$SKILLS_DIR/$skill"

    # Copy skill directory
    cp -r "$TEMP_DIR/$skill" "$SKILLS_DIR/"

    # Remove VERSION and README files (workflow metadata, not needed)
    rm -f "$SKILLS_DIR/$skill/VERSION"
    rm -f "$SKILLS_DIR/$skill/README.md"

    # Remove any symlinks (from the source repo)
    find "$SKILLS_DIR/$skill" -type l -delete

    echo "✓ Installed $skill"
  else
    echo "⚠ Skill not found or invalid: $skill"
  fi
done

rm -rf "$TEMP_DIR"
echo "Done! Installed ${#SKILLS[@]} skills."
```

### 2. Create `templates/installation/install-skills.yml`

```yaml
name: Install Claude Skills

on:
  workflow_dispatch:  # Manual trigger only

permissions:
  contents: write

jobs:
  install-skills:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Install skills
        run: |
          chmod +x .claude/install-skills.sh
          ./.claude/install-skills.sh

      - name: Commit changes
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

          if git diff --quiet .claude/skills/; then
            echo "No changes to commit"
          else
            git add .claude/skills/
            git commit -m "chore: Update Claude skills"
            git push
          fi
```

### 3. Create `templates/installation/README.md`

```markdown
# Automated Skill Installation

This directory contains templates for automating the installation of skills from this repository into your own projects.

## Quick Start

**1. Copy the installation script to your project:**
```bash
cp install-skills.sh YOUR_PROJECT/.claude/
chmod +x YOUR_PROJECT/.claude/install-skills.sh
```

**2. Edit the `SKILLS` array to choose which skills to install:**
```bash
SKILLS=(
  "mapping-codebases"
  "generating-patches"
  "versioning-skills"
)
```

**3. Run the script:**
```bash
cd YOUR_PROJECT
bash .claude/install-skills.sh
```

## Features

- ✅ **Simple**: Single command installs all configured skills
- ✅ **Always up-to-date**: Pulls latest versions from main branch
- ✅ **Clean**: Automatically removes VERSION and README files (workflow metadata)
- ✅ **Flexible**: Can be invoked by Claude during sessions or run manually

## GitHub Actions Integration (Optional)

For automated skill updates via GitHub Actions:

**1. Copy the workflow:**
```bash
cp install-skills.yml YOUR_PROJECT/.github/workflows/
```

**2. Trigger manually:**
- Go to Actions tab → "Install Claude Skills" → Run workflow
- Changes are automatically committed and pushed

## How It Works

The `install-skills.sh` script:
1. Clones the claude-skills repository
2. Copies selected skill directories to `.claude/skills/`
3. Removes VERSION/README files (workflow metadata, not needed in consuming repos)
4. Removes any symlinks from the source repo

The GitHub Actions workflow:
1. Runs the installation script
2. Commits any changes to skills
3. Pushes to the repository

## Use Cases

- **Project Setup**: Quickly bootstrap a new project with essential skills
- **Team Onboarding**: Ensure all team members have the same skills
- **CI/CD**: Keep skills synchronized across environments
- **Claude Sessions**: Let Claude update skills during development sessions

## Alternative: Manual Installation

If you prefer manual control, you can:
1. Download skill ZIPs from [Releases](../../releases)
2. Extract to `.claude/skills/skill-name/`
3. Use in Claude.ai or Claude Code

## Customization

Edit `install-skills.sh` to:
- Add/remove skills from the `SKILLS` array
- Change source repository URL
- Customize cleanup rules
- Add post-installation steps
```

### 4. Update `README.md`

Add this section after the existing "## Installing Skills" header:

```markdown
## Installing Skills

### For Claude.ai (Web Platform)

1. To install a skill in Claude.ai you first need a paid account (Claude Pro or Team)
2. Download the skill ZIP from the [Releases page](../../releases)
   - **Note:** Each release includes a direct download link for the skill ZIP - use that, not the "Source code" archives auto-generated by GitHub
3. Upload to [Claude.ai Skills Settings](https://claude.ai/settings/capabilities)
4. See [official documentation](https://support.claude.com/en/articles/12512198-how-to-create-custom-skills) for more details

### For Claude Code (Automated Installation)

For projects using Claude Code, you can automate skill installation using the provided templates:

```bash
# Copy the installation script
cp templates/installation/install-skills.sh YOUR_PROJECT/.claude/
chmod +x YOUR_PROJECT/.claude/install-skills.sh

# Run the script
cd YOUR_PROJECT
bash .claude/install-skills.sh
```

**Benefits:**
- ✅ Single command installs all configured skills
- ✅ Always pulls latest versions
- ✅ Can be invoked by Claude during sessions
- ✅ Optional GitHub Actions integration for automated updates

See [templates/installation/](templates/installation/) for detailed instructions and GitHub Actions workflow.
```

## Steps to Execute

1. Create feature branch:
   ```bash
   git checkout -b add-installation-automation
   ```

2. Create the directory:
   ```bash
   mkdir -p templates/installation
   ```

3. Create all three files in `templates/installation/` with the content above

4. Make the shell script executable:
   ```bash
   chmod +x templates/installation/install-skills.sh
   ```

5. Update README.md with the new section (replace the existing "## Installing Skills" section)

6. Commit the changes:
   ```bash
   git add templates/ README.md
   git commit -m "feat: Add automated skill installation templates

Add templates and documentation for automating skill installation in
Claude Code projects.

**New Files:**
- templates/installation/install-skills.sh - Bash script for automated installation
- templates/installation/install-skills.yml - GitHub Actions workflow
- templates/installation/README.md - Detailed usage instructions

**Key Features:**
- Single command installs selected skills from repository
- Always pulls latest versions from main branch
- Automatic cleanup of VERSION/README files (workflow metadata)
- Can be invoked by Claude during sessions or manually
- Optional GitHub Actions integration for automated updates

**Updated:**
- README.md - Added \"For Claude Code\" installation section

This provides a simple, flexible way for users to automate skill
installation in their own projects without manual ZIP downloads."
   ```

7. Push the branch:
   ```bash
   git push -u origin add-installation-automation
   ```

8. Create the PR:
   ```bash
   gh pr create --title "feat: Add automated skill installation templates" --body "Adds templates and documentation for automating skill installation in Claude Code projects.

## New Files
- \`templates/installation/install-skills.sh\` - Bash script for automated installation
- \`templates/installation/install-skills.yml\` - GitHub Actions workflow
- \`templates/installation/README.md\` - Detailed usage instructions

## Key Features
- ✅ Single command installs selected skills from repository
- ✅ Always pulls latest versions from main branch
- ✅ Automatic cleanup of VERSION/README files (workflow metadata)
- ✅ Can be invoked by Claude during sessions or manually
- ✅ Optional GitHub Actions integration for automated updates

## Updated
- \`README.md\` - Added \"For Claude Code\" installation section with automated installation instructions

This provides a simple, flexible way for users to automate skill installation in their own projects without manual ZIP downloads."
   ```

## Done!

The PR will be created and ready for review.
